{"version":3,"sources":["../../jsglib/tile.js"],"names":[],"mappings":";;;;;;;;;;AAAA,CAAC,UAAS,MAAM,EAAE;AACjB,aAAY,CAAC;;AAEb,KAAI,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,EAAE,CAAC;;KAE3B,IAAI;YAAJ,IAAI;;AACT,WADK,IAAI,CACG,YAAY,EAAgB;OAAd,CAAC,yDAAG,CAAC;OAAE,CAAC,yDAAG,CAAC;;yBADjC,IAAI;;sEAAJ,IAAI;;AAIR,SAAK,YAAY,GAAG,YAAY,CAAC;AACjC,SAAK,QAAQ,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACvC,SAAK,YAAY,GAAG,IAAI,CAAC;AACzB,SAAK,eAAe,GAAG,IAAI,CAAC;;GAC5B;;eARI,IAAI;;2BASD;AACP,QAAI,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;AAE7E,QAAI,IAAI,CAAC,SAAS,EAAE;sBACY,IAAI,CAAC,SAAS;SAAxC,gBAAgB,cAAhB,gBAAgB;SAAE,IAAI,cAAJ,IAAI;;AAC3B,aAAQ,CAAC,SAAS,GAAG,EAAC,gBAAgB,EAAhB,gBAAgB,EAAE,IAAI,EAAJ,IAAI,EAAC,CAAC;KAC9C;;AAED,WAAO,QAAQ,CAAC;IAChB;;;wBACI,GAAG,EAAuB;QAArB,CAAC,yDAAG,CAAC;;;;QAAE,CAAC,yDAAG,CAAC;QAAE,KAAK;;AAC5B,QAAI,UAAU,GAAG;AAChB,UAAK,EAAE,IAAI,CAAC,YAAY,CAAC,WAAW;AACpC,WAAM,EAAE,IAAI,CAAC,YAAY,CAAC,YAAY;KACtC,CAAC;;AAEF,QAAI,MAAM,GAAG,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC;AACnC,QAAI,MAAM,GAAG,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC;;AAElC,OAAG,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,EAAE,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;AACnE,OAAG,CAAC,SAAS,CACZ,IAAI,CAAC,YAAY,CAAC,KAAK,EACvB,IAAI,CAAC,QAAQ,CAAC,CAAC,EACf,IAAI,CAAC,QAAQ,CAAC,CAAC,EACf,UAAU,CAAC,KAAK,EAChB,UAAU,CAAC,MAAM,EACjB,MAAM,EACN,MAAM,EACN,UAAU,CAAC,KAAK,EAChB,UAAU,CAAC,MAAM,CACjB,CAAC;;AAEF,QAAI,CAAC,YAAY,GAAG,KAAK,CAAC;;AAE1B,QAAI,IAAI,CAAC,SAAS,EAAE;AACnB,SAAI,IAAI,CAAC,eAAe,EAAE;AACzB,WAAK,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;MACzC;;AAED,SAAI,CAAC,eAAe,GAAG,KAAK,CAAC,UAAU,CAAC,YAAM;AAC7C,aAAK,OAAO,CAAC,WAAW,CAAC,CAAC;MAC1B,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KACxB;;AAED,WAAO,IAAI,CAAC;IACZ;;;gCACY,gBAAgB,EAAE,IAAI,EAAE;AACpC,QAAI,CAAC,SAAS,GAAG,EAAC,gBAAgB,EAAhB,gBAAgB,EAAE,IAAI,EAAJ,IAAI,EAAC,CAAC;AAC1C,WAAO,IAAI,CAAC;IACZ;;;SA1DI,IAAI;IAAS,MAAM,CAAC,aAAa;;AA6DvC,OAAM,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEnB,OAAM,CAAC,MAAM,GAAG,MAAM,CAAC;CACvB,CAAA,CAAE,MAAM,CAAC,CAAC","file":"tile.js","sourcesContent":["(function(window) {\r\n\t\"use strict\";\r\n\r\n\tlet JSGlib = window.JSGlib || {};\r\n\r\n\tclass Tile extends JSGlib.EventsHandler {\r\n\t\tconstructor(sprite_class, x = 0, y = 0) {\r\n\t\t\tsuper();\r\n\r\n\t\t\tthis.sprite_class = sprite_class;\r\n\t\t\tthis.position = new JSGlib.Point(x, y);\r\n\t\t\tthis.needs_redraw = true;\r\n\t\t\tthis.clock_animation = null;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\tlet new_tile = new Tile(this.sprite_class, this.position.x, this.position.y);\r\n\r\n\t\t\tif (this.animation) {\r\n\t\t\t\tlet {next_tile_number, time} = this.animation;\r\n\t\t\t\tnew_tile.animation = {next_tile_number, time};\r\n\t\t\t}\r\n\r\n\t\t\treturn new_tile;\r\n\t\t}\r\n\t\tdraw(ctx, x = 0, y = 0, timer) {\r\n\t\t\tlet tiles_size = {\r\n\t\t\t\twidth: this.sprite_class.tiles_width,\r\n\t\t\t\theight: this.sprite_class.tiles_height\r\n\t\t\t};\r\n\r\n\t\t\tlet dest_x = x * tiles_size.height;\r\n\t\t\tlet dest_y = y * tiles_size.width;\r\n\r\n\t\t\tctx.clearRect(dest_x, dest_y, tiles_size.width, tiles_size.height);\r\n\t\t\tctx.drawImage(\r\n\t\t\t\tthis.sprite_class.image,\r\n\t\t\t\tthis.position.x,\r\n\t\t\t\tthis.position.y,\r\n\t\t\t\ttiles_size.width,\r\n\t\t\t\ttiles_size.height,\r\n\t\t\t\tdest_x,\r\n\t\t\t\tdest_y,\r\n\t\t\t\ttiles_size.width,\r\n\t\t\t\ttiles_size.height\r\n\t\t\t);\r\n\r\n\t\t\tthis.needs_redraw = false;\r\n\r\n\t\t\tif (this.animation) {\r\n\t\t\t\tif (this.clock_animation) {\r\n\t\t\t\t\ttimer.clearTimeout(this.clock_animation);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.clock_animation = timer.setTimeout(() => {\r\n\t\t\t\t\tthis.trigger('animation');\r\n\t\t\t\t}, this.animation.time);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tsetAnimation(next_tile_number, time) {\r\n\t\t\tthis.animation = {next_tile_number, time};\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n\r\n\tJSGlib.Tile = Tile;\r\n\r\n\twindow.JSGlib = JSGlib;\r\n})(window);"]}