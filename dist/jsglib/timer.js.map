{"version":3,"sources":["../../jsglib/timer.js"],"names":[],"mappings":";;;;;;;;;;AAAA,CAAC,UAAS,MAAM,EAAE;AACd,aAAY,CAAC;;AAEb,KAAI,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,EAAE,CAAC;;KAE9B,KAAK;YAAL,KAAK;;AACV,WADK,KAAK,GACY;OAAV,GAAG,yDAAG,EAAE;;yBADf,KAAK;;sEAAL,KAAK;;AAIT,SAAK,GAAG,GAAG,GAAG,CAAC;AACf,SAAK,MAAM,GAAG,EAAE,CAAC;;AAEjB,SAAK,EAAE,CAAC,MAAM,EAAE,YAAM;AACrB,UAAK,aAAa,EAAE,CAAC;IACrB,CAAC,CAAC;;GACH;;eAVI,KAAK;;mCAWM;AACf,SAAK,IAAI,oBAAoB,IAAI,IAAI,CAAC,MAAM,EAAE;AAC7C,SAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;AAC9C,SAAI,EAAE,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,MAAM,EAAE;AACpC,UAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACnC,UAAI,CAAC,YAAY,CAAC,oBAAoB,CAAC,CAAC;MACxC;KACD;;AAED,WAAO,IAAI,CAAC;IACZ;;;8BACU,QAAQ,EAAE,IAAI,EAAE;AAC1B,QAAI,oBAAoB,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA,CAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;AACrE,QAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,GAAG;AACnC,YAAO,EAAE,CAAC;AACV,WAAM,EAAE,AAAC,IAAI,GAAG,IAAI,GAAI,IAAI,CAAC,GAAG;KAChC,CAAC;AACF,QAAI,CAAC,EAAE,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;AACxC,WAAO,oBAAoB,CAAC;IAC5B;;;gCACY,oBAAoB,EAAE;AAClC,WAAO,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;AACzC,WAAO,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IACtC;;;SAlCI,KAAK;IAAS,MAAM,CAAC,aAAa;;AAoCxC,MAAK,CAAC,GAAG,GAAG,EAAE,CAAC;;AAEf,OAAM,CAAC,KAAK,GAAG,KAAK,CAAC;AAClB,OAAM,CAAC,MAAM,GAAG,MAAM,CAAC;CAC1B,CAAA,CAAE,MAAM,EAAE,QAAQ,CAAC,CAAC","file":"timer.js","sourcesContent":["(function(window) {\r\n    \"use strict\";\r\n\r\n    let JSGlib = window.JSGlib || {};\r\n\r\n\tclass Timer extends JSGlib.EventsHandler {\r\n\t\tconstructor(fps = 30) {\r\n\t\t\tsuper();\r\n\r\n\t\t\tthis.fps = fps;\r\n\t\t\tthis.clocks = {};\r\n\r\n\t\t\tthis.on('step', () => {\r\n\t\t\t\tthis.checkCounters();\r\n\t\t\t});\r\n\t\t}\r\n\t\tcheckCounters() {\r\n\t\t\tfor (let generated_event_name in this.clocks) {\r\n\t\t\t\tlet clock = this.clocks[generated_event_name];\r\n\t\t\t\tif (++clock.counter >= clock.target) {\r\n\t\t\t\t\tthis.trigger(generated_event_name);\r\n\t\t\t\t\tthis.clearTimeout(generated_event_name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tsetTimeout(callback, time) {\r\n\t\t\tlet generated_event_name = (Date.now() * Math.random()).toString(16);\r\n\t\t\tthis.clocks[generated_event_name] = {\r\n\t\t\t\tcounter: 0,\r\n\t\t\t\ttarget: (time / 1000) * this.fps\r\n\t\t\t};\r\n\t\t\tthis.on(generated_event_name, callback);\r\n\t\t\treturn generated_event_name;\r\n\t\t}\r\n\t\tclearTimeout(generated_event_name) {\r\n\t\t\tdelete this.clocks[generated_event_name];\r\n\t\t\treturn this.off(generated_event_name);\r\n\t\t}\r\n    }\r\n\tTimer.fps = 30;\r\n\r\n\tJSGlib.Timer = Timer;\r\n    window.JSGlib = JSGlib;\r\n})(window, document);"]}