{"version":3,"sources":["../../../samples/element/link.js"],"names":[],"mappings":"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","file":"link.js","sourcesContent":["\"use strict\";\r\n\r\nimport Element from \"jsglib/core/element\";\r\nimport Inputs from \"jsglib/core/inputs\";\r\nimport Layer from \"jsglib/core/layer\";\r\nimport Sprite from \"jsglib/core/sprite\";\r\n\r\n// Sprite class defining tiles and animations for Link\r\nexport class LinkSprite extends Sprite {\r\n    static init(timer) {\r\n        this\r\n            .makeTiles(32, 32, 2)\r\n            .defineTilesAnimations([\r\n                {\r\n                    name: 'walk_bottom',\r\n                    tiles: [1, 2],\r\n                    time: 150\r\n                },\r\n                {\r\n                    name: 'walk_left',\r\n                    tiles: [3, 4],\r\n                    time: 150\r\n                },\r\n                {\r\n                    name: 'walk_top',\r\n                    tiles: [5, 6],\r\n                    time: 150\r\n                },\r\n                {\r\n                    name: 'walk_right',\r\n                    tiles: [7, 8],\r\n                    time: 150\r\n                }\r\n            ], timer);\r\n    }\r\n}\r\n\r\nexport class Link extends Element {\r\n    constructor(x, y, game) {\r\n        // We must call the parent's constructor\r\n        super(x, y);\r\n\r\n        this.setSpriteClass(LinkSprite);\r\n\r\n        game.inputs\r\n            .on('keydown', (e) => {\r\n                // Do nothing if pressed key is not an arrow\r\n                if (!e.detail.is_arrow) {\r\n                    return;\r\n                }\r\n\r\n                e.preventDefault();\r\n\r\n                // Update Link's animation\r\n                this.switchAnimationByKey(e.detail.key);\r\n            })\r\n            .on('keyup', (e) => {\r\n                // Do nothing if released key is not an arrow\r\n                if (!e.detail.is_arrow) {\r\n                    return;\r\n                }\r\n\r\n                // Check if another arrow key is still pressed\r\n                for (let key_name in Inputs.KEYS.ARROWS) {\r\n                    let key = Inputs.KEYS.ARROWS[key_name];\r\n                    if (game.inputs.isKeyPressed(key)) {\r\n                        this.switchAnimationByKey(key);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // No arrows keys are pressed: we stop the animation\r\n                this.setCurrentTileNumber(this.current_animation.tiles_numbers[0]);\r\n                this.current_animation.stop();\r\n            });\r\n\r\n        this.on('frame', () => {\r\n            // On each frame, move player according to pressed keys\r\n            if (game.inputs.isKeyPressed(Inputs.KEYS.ARROWS.LEFT)) {\r\n                this.position.x -= 3;\r\n            }\r\n\r\n            if (game.inputs.isKeyPressed(Inputs.KEYS.ARROWS.RIGHT)) {\r\n                this.position.x += 3;\r\n            }\r\n\r\n            if (game.inputs.isKeyPressed(Inputs.KEYS.ARROWS.UP)) {\r\n                this.position.y -= 3;\r\n            }\r\n\r\n            if (game.inputs.isKeyPressed(Inputs.KEYS.ARROWS.DOWN)) {\r\n                this.position.y += 3;\r\n            }\r\n        });\r\n\r\n        // Add player to layer in order to display it\r\n        Layer.MAIN_LAYER.addElement(this);\r\n    }\r\n\r\n    switchAnimationByKey(key) {\r\n        switch (key) {\r\n            case Inputs.KEYS.ARROWS.LEFT:\r\n                this.useAnimation('walk_left');\r\n                break;\r\n\r\n            case Inputs.KEYS.ARROWS.UP:\r\n                this.useAnimation('walk_top');\r\n                break;\r\n\r\n            case Inputs.KEYS.ARROWS.RIGHT:\r\n                this.useAnimation('walk_right');\r\n                break;\r\n\r\n            case Inputs.KEYS.ARROWS.DOWN:\r\n                this.useAnimation('walk_bottom');\r\n                break;\r\n        }\r\n\r\n        return this;\r\n    }\r\n}"]}